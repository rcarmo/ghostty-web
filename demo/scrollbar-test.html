<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Scrollbar Test - Ghostty WASM</title>
    <style>
      @font-face {
        font-family: "JetBrainsMono NF";
        src: url("https://cdn.jsdelivr.net/gh/ryanoasis/nerd-fonts@latest/patched-fonts/JetBrainsMono/Ligatures/Regular/JetBrainsMonoNerdFont-Regular.ttf") format("truetype");
        font-weight: 400;
        font-style: normal;
        font-display: swap;
      }
      @font-face {
        font-family: "JetBrainsMono NF";
        src: url("https://cdn.jsdelivr.net/gh/ryanoasis/nerd-fonts@latest/patched-fonts/JetBrainsMono/Ligatures/Bold/JetBrainsMonoNerdFont-Bold.ttf") format("truetype");
        font-weight: 700;
        font-style: normal;
        font-display: swap;
      }
      @font-face {
        font-family: "JetBrainsMono NF";
        src: url("https://cdn.jsdelivr.net/gh/ryanoasis/nerd-fonts@latest/patched-fonts/JetBrainsMono/Ligatures/Italic/JetBrainsMonoNerdFont-Italic.ttf") format("truetype");
        font-weight: 400;
        font-style: italic;
        font-display: swap;
      }
      @font-face {
        font-family: "JetBrainsMono NF";
        src: url("https://cdn.jsdelivr.net/gh/ryanoasis/nerd-fonts@latest/patched-fonts/JetBrainsMono/Ligatures/BoldItalic/JetBrainsMonoNerdFont-BoldItalic.ttf") format("truetype");
        font-weight: 700;
        font-style: italic;
        font-display: swap;
      }
    </style>
    <style>
      body {
        margin: 0;
        padding: 20px;
        background: #1e1e1e;
        color: white;
        font-family: monospace;
      }
      #terminal {
        width: 800px;
        height: 600px;
        margin: 20px auto;
      }
      .info {
        max-width: 800px;
        margin: 0 auto 20px;
        padding: 10px;
        background: #2d2d2d;
        border-radius: 4px;
      }
    </style>
  </head>
  <body>
    <div class="info">
      <h2>Scrollbar Test</h2>
      <p>‚úÖ Blue banner removed</p>
      <p>üñ±Ô∏è Try clicking the scrollbar track or dragging the thumb</p>
      <p>üîÑ Use mouse wheel to scroll and see the scrollbar</p>
    </div>
    <div id="terminal"></div>

    <script type="module">
      import { init, Terminal } from '../lib/index.ts';
      import { FitAddon } from '../lib/addons/fit.ts';

      await init();

      const term = new Terminal({
        fontSize: 14,
        fontFamily: '"JetBrainsMono NF", Monaco, Menlo, monospace',
        scrollback: 5000,
      });

      const fitAddon = new FitAddon();
      term.loadAddon(fitAddon);

      term.open(document.getElementById('terminal'));

      // Wait for JetBrains Mono to load, then re-measure fonts
      await document.fonts.load('14px "JetBrainsMono NF"');
      term.loadFonts();

      fitAddon.fit();

      // Write lots of lines to create scrollback
      term.write('\\x1b[1;32m=== Scrollbar Test ===\\x1b[0m\\r\\n\\r\\n');
      term.write('Generating 200 lines of content...\\r\\n\\r\\n');

      for (let i = 1; i <= 200; i++) {
        const color = 31 + (i % 7);
        term.write(
          `\\x1b[${color}mLine ${i}: This is test content for scrolling. The quick brown fox jumps over the lazy dog.\\x1b[0m\\r\\n`
        );
      }

      term.write('\\r\\n\\x1b[1;33m‚úÖ Done! Now try:\\x1b[0m\\r\\n');
      term.write('  ‚Ä¢ Scroll up with mouse wheel\\r\\n');
      term.write('  ‚Ä¢ Click on the scrollbar track to jump\\r\\n');
      term.write('  ‚Ä¢ Drag the scrollbar thumb\\r\\n');
      term.write('  ‚Ä¢ Notice: NO blue banner! üéâ\\r\\n');

      // Handle window resize
      window.addEventListener('resize', () => {
        fitAddon.fit();
      });
    </script>
  </body>
</html>
